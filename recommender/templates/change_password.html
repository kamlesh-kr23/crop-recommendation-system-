{% extends "base.html" %}
{% load static %}
{% block title %}Change Password{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row g-4">

        <!-- LEFT COLUMN -->
        <div class="col-lg-6">
            <div class="card shadow border-0 rounded-4 p-4">

                <h4 class="mb-4">
                    <i class="fa-solid fa-key me-2 text-success"></i>
                    Change Password
                </h4>

                {% if form.errors %}
                <div class="alert alert-danger">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <div>{{ error }}</div>
                        {% endfor %}
                    {% endfor %}
                </div>
                {% endif %}

                <form method="POST">
                    {% csrf_token %}

                    <!-- Current Password -->
                    <div class="mb-3">
                        <label class="form-label">Current Password</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fa-solid fa-lock"></i>
                            </span>
                            {{ form.old_password }}
                            <span class="input-group-text toggle-password"
                                  onclick="togglePassword('id_old_password')">
                                <i class="fa-solid fa-eye"></i>
                            </span>
                        </div>
                    </div>

                    <!-- New Password -->
                    <div class="mb-3">
                        <label class="form-label">New Password</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fa-solid fa-key"></i>
                            </span>
                            {{ form.new_password1 }}
                            <span class="input-group-text toggle-password"
                                  onclick="togglePassword('id_new_password1')">
                                <i class="fa-solid fa-eye"></i>
                            </span>
                        </div>
                    </div>

                    <!-- Confirm Password -->
                    <div class="mb-4">
                        <label class="form-label">Confirm New Password</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fa-solid fa-shield"></i>
                            </span>
                            {{ form.new_password2 }}
                            <span class="input-group-text toggle-password"
                                  onclick="togglePassword('id_new_password2')">
                                <i class="fa-solid fa-eye"></i>
                            </span>
                        </div>
                    </div>

                    <button type="submit"
                            class="btn btn-success w-100 rounded-3">
                        <i class="fa-solid fa-rotate me-2"></i>
                        Update Password
                    </button>

                </form>

            </div>
        </div>

        <!-- RIGHT COLUMN -->
        <div class="col-lg-6">
            <div class="card shadow border-0 rounded-4 p-4 bg-light">

                <h5 class="mb-3">
                    <i class="fa-solid fa-shield-halved me-2 text-dark"></i>
                    Security Tips
                </h5>

                <ul class="mb-0">
                    <li>Use a unique password you don't use elsewhere.</li>
                    <li>Avoid names, birthdays, or common words.</li>
                    <li>Do not reuse your current password.</li>
                    <li>Consider a password manager for strong passwords.</li>
                </ul>

            </div>
        </div>

    </div>
</div>

<script>
function togglePassword(id) {
    const field = document.getElementById(id);
    const icon = event.currentTarget.querySelector("i");

    if (field.type === "password") {
        field.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
    } else {
        field.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
    }
}
</script>

<style>
input {
    border-radius: 0 6px 6px 0 !important;
}
.input-group-text {
    background: #f8f9fa;
}
.toggle-password {
    cursor: pointer;
}
</style>
<footer class="footer-premium mt-4 bg-success text-white-100">
    <div class="container">
        <div class="row">
            <div class="footer-bottom clip-text text-center small text-muted text-white-100 " style="te">
               Copyright Â© 2026 Smart Crop Recommendation | Built with Django & ML
            </div>
        </div>
</footer>

{% endblock %}